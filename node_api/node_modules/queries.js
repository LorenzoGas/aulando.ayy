var listaDipartimenti = "SELECT * FROM Dipartimento";
var listaAule = "SELECT a.nome, a.codice FROM Aula a, Dipartimento d WHERE d.id = ?";
var listaDocenti = "SELECT a.cognomenome, a.id, a.codice FROM Docente a JOIN Lezione l ON l.docente = a.id JOIN AulaLezione al ON al.lezione = l.id JOIN Aula au ON au.id = al.aula JOIN Dipartimento d ON d.id = au.dipartimento WHERE d.id = ? GROUP BY a.cognomenome";
var listaMaterie = "SELECT m.nome, m.id FROM Materia m JOIN MateriaSubcorso ms ON ms.materia = m.id JOIN Subcorso s ON s.id = ms.subcorso WHERE s.id = ? GROUP BY m.nome";
var listaCorsi = "SELECT c.nome, c.id, c.codice FROM Corso c JOIN Subcorso s ON s.corso = c.id JOIN MateriaSubcorso ms ON ms.subcorso = s.id JOIN Materia m ON m.id = ms.materia JOIN Lezione l ON l.materia = m.id JOIN AulaLezione al ON al.lezione = l.id JOIN Aula a ON a.id = al.aula JOIN Dipartimento d ON d.id = a.dipartimento WHERE d.id = ? GROUP BY c.id";
var listaSubcorsi = "SELECT s.nome, s.id, s.codice FROM Corso c JOIN Subcorso s ON s.corso = c.id WHERE c.id = ? GROUP BY s.nome";

var auleLibere = "SELECT a.nome, MIN(DATE_FORMAT(inizio, '%H:%i'))as fino FROM Aula a JOIN Dipartimento d ON a.dipartimento = d.id AND d.id = ? LEFT JOIN AulaLezione al ON al.aula = a.id LEFT JOIN Lezione l ON al.lezione = l.id AND l.giorno = ? AND l.inizio > ? WHERE a.id NOT IN( SELECT a.id FROM	Aula a JOIN AulaLezione al ON a.id = al.aula JOIN Lezione l ON l.id = al.lezione WHERE	l.giorno = ? AND l.inizio <= ? AND l.fine > ?) GROUP BY a.nome ORDER BY IFNULL(MIN(l.inizio),'24:00') DESC";
var auleLibereDalleAlle = "SELECT nome FROM Aula WHERE dipartimento = ? AND id NOT IN (SELECT a.id FROM Aula a JOIN AulaLezione al ON a.id = al.aula JOIN Lezione l ON l.id = al.lezione AND l.giorno = ? AND ((l.fine <= ? AND l.fine > ?) OR (l.inizio >= ? AND l.inizio < ?)) GROUP BY a.nome)";
var orariAula = "SELECT d.cognomenome as docente, m.nome as materia, DATE_FORMAT(inizio, '%H:%i') as inizio, DATE_FORMAT(fine, '%H:%i') as fine FROM Aula a JOIN Dipartimento di ON a.dipartimento = di.id AND di.id = ? JOIN AulaLezione al ON a.id = al.aula JOIN Lezione l ON al.lezione = l.id JOIN Materia m ON l.materia = m.id JOIN Docente d ON l.docente = d.id WHERE a.nome = ? AND l.giorno = ? ORDER BY l.inizio";

exports.listaAule = listaAule;
exports.listaDipartimenti = listaDipartimenti;
exports.listaMaterie = listaMaterie;
exports.listaDocenti = listaDocenti;
exports.listaCorsi = listaCorsi;
exports.listaSubcorsi = listaSubcorsi;

exports.auleLibere = auleLibere;
exports.auleLibereDalleAlle = auleLibereDalleAlle;
exports.orariAula = orariAula;